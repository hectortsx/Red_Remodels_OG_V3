"use strict";(self.webpackJsonpruntime=self.webpackJsonpruntime||[]).push([[690],{2666:(e,t,n)=>{n.r(t),n.d(t,{collectWidgetCount:()=>c,countButtonTypes:()=>i,countImages:()=>l,countWidgetTypes:()=>a});var o=n(5861),r=n(6892);const u="[data-widget-type], [data-element-type]";function a(){const e=document.querySelectorAll(u),t=Array.from(e).reduce(m({generateFeatureKey:e=>`widget-${g(e)}`}),{});return Object.values(t)}function i(){const e=document.querySelectorAll(u),t=Array.from(e).filter(p).reduce(m({generateFeatureKey:e=>`${function(e){return e.classList.contains("button_2")||e.querySelector(".button_2")?"button-secondary":"button-primary"}(e)}-${g(e)}`}),{});return Object.values(t)}function l(){const e=document.querySelectorAll("img"),t=document.querySelectorAll("image"),n=document.querySelectorAll("img[alt]"),o=document.querySelectorAll("image[alt]");return[{feature:"all-image-elements",count:e.length+t.length},{feature:"all-image-elements-with-alt",count:n.length+o.length}]}function c(e){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((function*(e){var t;if(!(0,r.i)("scripts.widgetCount.enabled"))return;const n=e||a().concat(function(){const e=document.querySelectorAll('[data-element-type="mapextension"][provider="mappy"][data-radius-toggle="true"]');return e.length?[{feature:"maps-mappy-radius",count:e.length}]:[]}()).concat(i()).concat(function(){const e=document.querySelectorAll('[data-element-type="html"]'),t=["acuityscheduling","tidycal","Calendly","simplybookme","fareharbor","bookalet","bookeo"];return Array.from(e).find((e=>t.some((t=>e.innerHTML.toLowerCase().includes(t)))))?[{feature:"booking-script",count:1}]:[]}()).concat(function(){const e=document.querySelectorAll(u),t=["book","appointment","schedule"];return Array.from(e).filter(p).find((e=>t.some((t=>e.innerHTML.toLowerCase().includes(t)))))?[{feature:"booking-text",count:1}]:[]}()).concat(l()),{_currentPage:o,Parameters:c}=window;!function(e){d.apply(this,arguments)}({features:n,siteAlias:null==c?void 0:c.SiteAlias,sitePublicationDate:null!=c&&c.PublicationDate?new Date(null==c?void 0:c.PublicationDate).getTime():0,pageType:null==c?void 0:c.pageType,pageUuid:(null==o||null===(t=o.pageContent)||void 0===t?void 0:t.uuid)||(null==c?void 0:c.InitialPageUuid)||`${null==o?void 0:o.pageID}`,path:location.pathname})})),s.apply(this,arguments)}function d(){return(d=(0,o.Z)((function*(e){try{var t;const n=null===(t=window.rtCommonProps)||void 0===t?void 0:t["runtimecollector.url"];if(!n)return;yield fetch(`${n}/feature/metrics`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})}catch(e){console.debug("Failed send metrics for feature count",e)}}))).apply(this,arguments)}function m({generateFeatureKey:e}){return(t,n)=>{const o=e(n);return t[o]||(t[o]={feature:o,count:0}),t[o].count+=1,t}}const p=e=>{const t=e.classList.contains("dmWidget")&&y(e),n=Array.from(e.querySelectorAll(".dmWidget")).some((e=>y(e)));return t||n};function y(e){return"none"!==window.getComputedStyle(e).getPropertyValue("display")}const g=e=>{const t=e.getAttribute("data-widget-type")||e.getAttribute("data-element-type"),n=e.getAttribute("data-widget-id");return n?`${t}-${n}`:t}}}]);