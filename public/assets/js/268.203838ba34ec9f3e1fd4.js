(self.webpackJsonpruntime=self.webpackJsonpruntime||[]).push([[268],{7268:(t,e,r)=>{"use strict";r.r(e),r.d(e,{init:()=>o});var n=r(5861),i=r(9575);class s{constructor({container:t}){this._positionHandlers={start:()=>{this.handle.style.setProperty("left","0"),this._clipAfterImg(0)},center:t=>{this.handle.style.setProperty("left",""),this._clipAfterImg(t.width/2)},end:t=>{this.handle.style.setProperty("left",`${t.width}px`),this._clipAfterImg(t.width)}},this.container=t,this.doc=this.container.ownerDocument.documentElement,this._initialized=this.initSizes();const e=this.handle.getBoundingClientRect();this.offset={left:e.width/2,top:e.height/2},this._bindMethods(),this.handle.style.setProperty("left",""),this.handle.addEventListener("touchstart",this.startDragging),this.handle.addEventListener("mousedown",this.startDragging),this.observer=new MutationObserver(this.updateData),this.observer.observe(this.container,{attributes:!0,childList:!1,subtree:!1})}initSizes(){var t=this;return(0,n.Z)((function*(){t.beforeImg=t.container.querySelector(".baf__img-preview.baf__before"),t.afterImg=t.container.querySelector(".baf__img-preview.baf__after"),t.innerAfterImg=t.afterImg.querySelector("img"),t.handle=t.container.querySelector(".baf__handle"),yield Promise.all([t._waitForImgLoad(t.beforeImg),t._waitForImgLoad(t.innerAfterImg)]),t._rePosition(),t.container.ownerDocument.defaultView.addEventListener("resize",t._rePosition),t.container.ownerDocument.defaultView.addEventListener("orientationchange",t._rePosition)}))()}release(){this.observer.disconnect(),this.handle.removeEventListener("touchstart",this.startDragging),this.handle.removeEventListener("mousedown",this.startDragging),this.container.ownerDocument.defaultView.removeEventListener("resize",this._rePosition),this.container.ownerDocument.defaultView.removeEventListener("orientationchange",this._rePosition),this._stopTrackingMouseEvents()}startDragging(t){this.container.classList.add("baf__dragging"),this.container.classList.add("user-interacting"),this.containerRect=this.container.getBoundingClientRect();const e=this.handle.getBoundingClientRect(),{clientX:r}=c(t);this.handle.style.transform=`translate(${r-this.containerRect.left-e.width/2}px, -50%)`,this.handle.style.left="",this._startTrackingMouseEvents()}performUpdates(t){const{clientX:e}=c(t);this.movedTo=this._calculateMoveTo(e),this.handle.style.transform=`translate(${this.movedTo-this.offset.left}px, -50%)`,this._clipAfterImg(this.movedTo)}_calculateMoveTo(t){const e=t-this.containerRect.left,r=Math.max(0,e);return e>this.containerRect.width?this.containerRect.width:r}updatesAfterDrag(){this.container.classList.remove("baf__dragging"),this.container.classList.remove("user-interacting"),this.handle.style.setProperty("transform",""),this.handle.style.setProperty("left",`${this.movedTo}px`),this._stopTrackingMouseEvents()}updateData(t){Array.from(t).forEach((({attributeName:t})=>{if("data-ext"!==t)return;const e=this.extractData();this.applyData(e)}))}extractData(){return JSON.parse(i.Base64.decode(this.container.dataset.ext))}applyData({imgBefore:t,imgBeforeAlt:e,imgAfter:r,imgAfterAlt:n,beforeText:i,afterText:s,beforeTextVisible:a,afterTextVisible:o}){this.beforeImg.src=t||this.beforeImg.src,this.beforeImg.setAttribute("alt",e),this.innerAfterImg.src=r||this.innerAfterImg.src,this.innerAfterImg.setAttribute("alt",n);const c=this.container.querySelector(".baf__title"),h=this.container.querySelector(".baf__title.baf__before");c.innerText=i,c.classList.toggle("baf__title--hidden",!a),h.innerText=s,h.classList.toggle("baf__title--hidden",!o),this._initialized=this.initSizes()}_rePosition(){const{width:t,height:e}=getComputedStyle(this.container);this.afterImg.style.width=t,this.afterImg.style.height=e;const r=this.container.getBoundingClientRect();this.handle.style.setProperty("left","");const{initialPosition:n}=this.extractData();(this._positionHandlers[n]||this._positionHandlers.center)(r)}_clipAfterImg(t){this.afterImg.style.transform=`translate(${t}px, 0)`,this.innerAfterImg.style.transform=`translate(-${t}px, 0)`}_stopTrackingMouseEvents(){this.doc.removeEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.removeEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_startTrackingMouseEvents(){this.doc.addEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.addEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_waitForImgLoad(t){return new Promise((e=>{t.onload=()=>{window.requestAnimationFrame(e)},t.src=t.src.slice()}))}_bindMethods(){this.startDragging=this.startDragging.bind(this),this.performUpdates=this.performUpdates.bind(this),this.updatesAfterDrag=this.updatesAfterDrag.bind(this),this.updateData=this.updateData.bind(this),this._rePosition=this._rePosition.bind(this)}}s.displayName="BeforeAndAfter";const a={};function o(t){return Array.from(document.querySelectorAll(".dmBeforeAndAfter")).forEach((t=>{a[t.id]&&a[t.id].release(),a[t.id]=new s({container:t})})),a[(t||{}).id]||{}}function c(t){return t.type.includes("touch")?(t.touches||t.changedTouches)[0]:t}},9575:function(t,e,r){var n,i;i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:this,t.exports=function(r){"use strict";var i,s=(r=r||{}).Base64,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var e={},r=0,n=t.length;r<n;r++)e[t.charAt(r)]=r;return e}(a),c=String.fromCharCode,h=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?c(192|e>>>6)+c(128|63&e):c(224|e>>>12&15)+c(128|e>>>6&63)+c(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|e>>>18&7)+c(128|e>>>12&63)+c(128|e>>>6&63)+c(128|63&e)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(t){return t.replace(d,h)},f=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[a.charAt(r>>>18),a.charAt(r>>>12&63),e>=2?"=":a.charAt(r>>>6&63),e>=1?"=":a.charAt(63&r)].join("")},l=r.btoa&&"function"==typeof r.btoa?function(t){return r.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,f)},g=function(t){return l(u(String(t)))},p=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},m=function(t,e){return e?p(g(t)):g(t)};r.Uint8Array&&(i=function(t,e){for(var r="",n=0,i=t.length;n<i;n+=3){var s=t[n],o=t[n+1],c=t[n+2],h=s<<16|o<<8|c;r+=a.charAt(h>>>18)+a.charAt(h>>>12&63)+(void 0!==o?a.charAt(h>>>6&63):"=")+(void 0!==c?a.charAt(63&h):"=")}return e?p(r):r});var v,A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,b=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(e>>>10))+c(56320+(1023&e));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},_=function(t){return t.replace(A,b)},y=function(t){var e=t.length,r=e%4,n=(e>0?o[t.charAt(0)]<<18:0)|(e>1?o[t.charAt(1)]<<12:0)|(e>2?o[t.charAt(2)]<<6:0)|(e>3?o[t.charAt(3)]:0),i=[c(n>>>16),c(n>>>8&255),c(255&n)];return i.length-=[0,0,2,1][r],i.join("")},w=r.atob&&"function"==typeof r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/\S{1,4}/g,y)},x=function(t){return w(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},D=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},B=function(t){return function(t){return _(w(t))}(D(t))};r.Uint8Array&&(v=function(t){return Uint8Array.from(x(D(t)),(function(t){return t.charCodeAt(0)}))});if(r.Base64={VERSION:"2.6.4",atob:x,btoa:l,fromBase64:B,toBase64:m,utob:u,encode:m,encodeURI:function(t){return m(t,!0)},btou:_,decode:B,noConflict:function(){var t=r.Base64;return r.Base64=s,t},fromUint8Array:i,toUint8Array:v},"function"==typeof Object.defineProperty){var E=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",E((function(){return B(this)}))),Object.defineProperty(String.prototype,"toBase64",E((function(t){return m(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",E((function(){return m(this,!0)})))}}return r.Meteor&&(Base64=r.Base64),t.exports?t.exports.Base64=r.Base64:void 0===(n=function(){return r.Base64}.apply(e,[]))||(t.exports=n),{Base64:r.Base64}}(i)}}]);