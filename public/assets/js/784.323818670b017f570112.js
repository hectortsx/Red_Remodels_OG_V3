(self.webpackJsonpruntime=self.webpackJsonpruntime||[]).push([[784],{8784:(t,e,r)=>{"use strict";r.r(e),r.d(e,{PROVIDERS:()=>S,PROVIDERS_API:()=>y,changeState:()=>v,init:()=>p});var i=r(5861),n=r(3279),s=r.n(n),o=r(9575),a=r(2461),u=r(1069);function c(){return(c=(0,i.Z)((function*(){window.captchaPromise=new u.B,window.grecaptcha.execute(),function(){const t=null===(e=[...document.getElementsByTagName("iframe")].find((t=>{var e;return null===(e=t.src)||void 0===e?void 0:e.includes("google.com/recaptcha/api2/bframe")})))||void 0===e||null===(e=e.parentNode)||void 0===e?void 0:e.parentNode;var e;t&&(l=new MutationObserver((function(t){t.forEach((t=>{"attributes"===t.type&&"style"===t.attributeName&&"0"===t.target.style.opacity&&(l&&l.disconnect(),window.grecaptcha.reset(),window.captchaPromise.resolve(null))}))})),l.observe(t,{attributes:!0,attributeFilter:["style"]}))}();const t=yield window.captchaPromise;return window.grecaptcha.reset(),l&&l.disconnect(),t}))).apply(this,arguments)}let l=null;var d=r(8365),h=r(7720);const f={};let m={};function p(t){return Array.from(document.querySelectorAll(".dmSignup")).forEach((t=>{f[t.id]&&f[t.id].removeEventListeners(),f[t.id]=new w({container:t})})),f[(t||{}).id]||{}}function v(t,e){m=f[t],m.identityProvider===e||"default"===m.identityProvider&&m.defaultCurrentVaritation===e||(f[t].initStates(e),f[t].changeState(e))}const S=["okta","azuread","auth0"],y=["oktaApi","auth0Api"],g={empty:{},signup:{},login:{},resetPassword:{},chooseNewPassword:{},newPasswordSuccess:{},resetPasswordCheckEmail:{}};class w{constructor({container:t}){m=t;const e=m.querySelector("#runtime-model");this.identityProvider=m.getAttribute("provider"),this.defaultCurrentVaritation=m.getAttribute("defaultCurrentVariation"),this.runtimeModel=JSON.parse(o.Base64.decode(e.dataset.runtimeModel)),this.searchParams=function(t){const e={},r=("?"===t[0]?t.substr(1):t).split("&");for(const t of r){const r=t.split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return e}(window.location.search),this.signupStateVariation=this.runtimeModel.statesVariation,this.initStates(this.identityProvider),this.initInitialState(this.identityProvider),this.bindMethods()}changeState(t){this.hideAll(),g[t].div.style.display="flex"}hideAll(){for(const t in g)g[t].hasOwnProperty("div")&&null!==g[t].div&&(g[t].div.style.display="none")}bindMethods(){this.changeState=this.changeState.bind(this),this.hideAll=this.hideAll.bind(this),this.handleSubmitForm=this.handleSubmitForm.bind(this),this.addEventListener=this.addEventListener.bind(this),this.initStates=this.initStates.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.handleSignupFormSubmit=this.handleSignupFormSubmit.bind(this),this.handleLoginFormSubmit=this.handleLoginFormSubmit.bind(this),this.handleResetPasswordSubmit=this.handleResetPasswordSubmit.bind(this),this.initInitialState=this.initInitialState.bind(this)}removeEventListeners(){var t=this;for(const t in g)g[t].hasOwnProperty("links")&&g[t].links.forEach((t=>{t.element.removeEventListener("touchstart",(e=>{e.preventDefault(),t.callback()})),t.element.removeEventListener("click",(e=>{e.preventDefault(),t.callback()}))}));"default"===this.runtimeModel.statesVariation.toLowerCase()&&(this.signupForm.removeEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleSignupFormSubmit()}));return function(t){return e.apply(this,arguments)}}()),this.loginForm.removeEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleLoginFormSubmit()}));return function(t){return e.apply(this,arguments)}}()),this.resetPasswordForm.removeEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleResetPasswordSubmit()}));return function(t){return e.apply(this,arguments)}}()))}initStates(t){"default"===t&&(this.initEmptyState(),this.signupForm=m.querySelector(".signup-form"),this.loginForm=m.querySelector(".login-form"),this.resetPasswordStateDiv=m.querySelector(".reset-password-state"),this.resetPasswordForm=this.resetPasswordStateDiv.querySelector(".reset-password-form"),this.initSignupState(),this.initLoginState(),this.initResetPasswordState(),this.initResetPasswordCheckEmailState(),this.initChooseNewPasswordState(),this.initNewPasswordSuccessState()),S.includes(t)&&this.initProviderOidcState(t),y.includes(t)&&this.initProviderApiState(t)}initInitialState(t){if("default"===t.toLowerCase()){if("reset"===this.searchParams.type){if(this.searchParams.success)return void this.changeState("newPasswordSuccess");if(this.searchParams.token)return void this.changeState("chooseNewPassword");if("invalid-token"===this.searchParams.error)return void this.changeState("resetPassword")}const t=m.getAttribute("default-state").toLowerCase();this.changeState(t)}else this.changeState(t)}initEmptyState(){g.empty.div=m.querySelector(".empty-state")}initResetPasswordState(){var t=this;g.resetPassword.div=this.resetPasswordStateDiv,g.resetPassword.links=[{element:this.resetPasswordStateDiv.querySelector(".go-to-login-section"),callback:()=>this.changeState("login")}],"reset"===this.searchParams.type&&"invalid-token"===this.searchParams.error&&(this.resetPasswordStateDiv.querySelector(".form-description").textContent=this.runtimeModel.resetPasswordInvalidTokenDescription),g.resetPassword.links.map((t=>this.addEventListener(t)));const e=this.resetPasswordStateDiv.querySelector("#email"),r=()=>{e.setCustomValidity(this.runtimeModel.formUserNotExistsErrorText),e.reportValidity()};e.addEventListener("keyup",s()((t=>{t.preventDefault(),this.validateUserExistence({inputField:e,onUserNotExists:r})}),400)),this.resetPasswordForm.addEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleResetPasswordSubmit()}));return function(t){return e.apply(this,arguments)}}())}initSignupState(){var t=this;this.loginLink=m.querySelector(".login-link"),this.signupStateDiv=m.querySelector(".signup-state"),g.signup.div=this.signupStateDiv,g.signup.links=[{element:this.loginLink,callback:()=>this.changeState("login")}],g.signup.links.map((t=>this.addEventListener(t))),this.signupForm.addEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleSignupFormSubmit()}));return function(t){return e.apply(this,arguments)}}());const e=this.signupForm.querySelector("#email"),r=()=>{e.setCustomValidity(this.runtimeModel.formUserExistErrorText),e.reportValidity()};e.addEventListener("keyup",s()((t=>{t.preventDefault(),this.validateUserExistence({inputField:e,onUserExists:r})}),400)),this.initPasswordButton(this.signupForm)}initLoginState(){var t=this;this.loginStateDiv=m.querySelector(".login-state"),this.forgotPasswordLink=m.querySelector(".forgot-password-link"),this.notAMemberLink=m.querySelector(".not-a-member-link"),g.login.div=this.loginStateDiv,g.login.links=[{element:this.notAMemberLink,callback:()=>this.changeState("signup")},{element:this.forgotPasswordLink,callback:()=>this.changeState("resetPassword")}],g.login.links.map((t=>this.addEventListener(t))),this.loginForm.addEventListener("submit",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleLoginFormSubmit()}));return function(t){return e.apply(this,arguments)}}()),this.initPasswordButton(this.loginForm)}initResetPasswordCheckEmailState(){this.resetPasswordCheckEmailStateDiv=m.querySelector(".reset-password-check-email-state"),g.resetPasswordCheckEmail.div=this.resetPasswordCheckEmailStateDiv,g.resetPasswordCheckEmail.links=[{element:this.resetPasswordCheckEmailStateDiv.querySelector(".go-to-login-section"),callback:()=>this.changeState("login")}],g.resetPasswordCheckEmail.links.map((t=>this.addEventListener(t)))}initChooseNewPasswordState(){this.chooseNewPasswordStateDiv=m.querySelector(".choose-new-password-state"),g.chooseNewPassword.div=this.chooseNewPasswordStateDiv,this.searchParams.token&&(this.chooseNewPasswordStateDiv.querySelector("#token").value=this.searchParams.token)}initNewPasswordSuccessState(){var t=this;this.newPasswordSuccessStateDiv=m.querySelector(".new-password-success-state"),this.goToSiteBtn=this.newPasswordSuccessStateDiv.querySelector("#go-to-site-btn"),g.newPasswordSuccess.div=this.newPasswordSuccessStateDiv,this.goToSiteBtn.addEventListener("click",function(){var e=(0,i.Z)((function*(e){e.preventDefault(),yield t.handleGoToSiteRequest()}));return function(t){return e.apply(this,arguments)}}(),!1)}initPasswordButton(t){const e=t.querySelector("#password"),r=t.querySelector(".show-button"),i=t.querySelector("#show-password-button"),n=t.querySelector("#show-password-icon"),s=t.querySelector("#show-password-off-icon");e.addEventListener("input",(t=>{t.target.value?r.style.display="flex":r.style.display="none"})),i.addEventListener("change",(t=>{t.target.checked?(e.type="text",s.style.display="block",n.style.display="none"):(e.type="password",s.style.display="none",n.style.display="block")}))}initProviderOidcState(t){g[t]={},g[t].div=m.querySelector(`.${t}-state`),F(g[t].div.querySelector(".auth-error"),""),"access_denied"===this.searchParams.error&&F(g[t].div.querySelector(".auth-error"),this.runtimeModel.providerAccessDeniedErrorText)}initProviderApiState(t){g[t]={},g[t].form=m.querySelector(`.${t}-form`),g[t].div=m.querySelector(`.${t}-state`);const e=g[t].div.querySelector(".form-error");F(e,""),"access_denied"===this.searchParams.error?F(e,this.runtimeModel.providerAccessDeniedErrorText):"invalid_credentials"===this.searchParams.error?F(e,this.runtimeModel.formIncorrectCredentialsText):"true"===this.searchParams.error&&F(e,this.runtimeModel.formErrorText),this.initPasswordButton(g[t].form)}validateUserExistence({inputField:t,onUserExists:e,onUserNotExists:r}){if(t.setCustomValidity(""),t.value.length&&t.validity.valid&&!this.isInPreviewMode()){const i=`/rts/auth/public/users/${t.value}`;(0,h.e)({url:i}).then((()=>{e&&e()})).catch((t=>{t.status&&404!==t.status?a.Gl.warn({message:"Error getting a user",error:t}):r&&r()}))}}addEventListener({element:t,callback:e}){t.addEventListener("touchstart",(t=>{t.preventDefault(),e()})),t.addEventListener("click",(t=>{t.preventDefault(),e()}))}handleSignupFormSubmit(){var t=this;return(0,i.Z)((function*(){F(t.signupForm.querySelector(".form-error"),"");const e=yield C(t.signupForm),r=A(t.signupForm,e);yield t.handleSubmitForm(t.signupForm,`/rts/auth/public/user?${r}`,E,(()=>{F(t.signupForm.querySelector(".form-error"),t.runtimeModel.formErrorText)}))}))()}handleResetPasswordSubmit(){var t=this;return(0,i.Z)((function*(){F(t.resetPasswordForm.querySelector(".form-error"),"");const e=A(t.resetPasswordForm);yield t.handleSubmitForm(t.resetPasswordForm,`/rts/auth/public/users/resetPassword?${e}`,(()=>{t.changeState("resetPasswordCheckEmail")}),(()=>{F(t.resetPasswordForm.querySelector(".form-error"),t.runtimeModel.formErrorText)}))}))()}handleLoginFormSubmit(){var t=this;return(0,i.Z)((function*(){F(t.loginForm.querySelector(".form-error"),"");const e=t.loginForm.querySelectorAll("#password-field,#username");e.forEach((t=>t.classList.remove("invalid-input")));const r=yield C(t.loginForm),i=A(t.loginForm,r);t.handleSubmitForm(t.loginForm,`/rts/auth/login?${i}`,E,(r=>{if(401===r.status)return e.forEach((t=>t.classList.add("invalid-input"))),void F(t.loginForm.querySelector(".form-error"),t.runtimeModel.formIncorrectCredentialsText);F(t.loginForm.querySelector(".form-error"),t.runtimeModel.formErrorText)}))}))()}handleGoToSiteRequest(){return(0,i.Z)((function*(){const t=window.Parameters.HomeUrl;window.location.assign(t)}))()}handleSubmitForm(t,e,r,n){var s=this;return(0,i.Z)((function*(){const i=t.querySelector("input[type='submit']");i.disabled=!0;try{(0,d.$U)()||(s.isInPreviewMode()?yield function(t){return b.apply(this,arguments)}(n):yield function(t,e,r,i){return P.apply(this,arguments)}(t,e,r,n))}finally{i.disabled=!1}}))()}isInPreviewMode(){return this.runtimeModel.isInPreview}}function b(){return(b=(0,i.Z)((function*(t){try{E(yield fetch("/ms/auth/public/preview/authorize",{method:"GET",redirect:"follow"}))}catch(e){a.Gl.info({message:"error in preview",error:e}),t(e)}}))).apply(this,arguments)}function P(){return(P=(0,i.Z)((function*(t,e,r,i){try{const t=yield fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});t.status>=200&&t.status<=400?r(t):i(t)}catch(t){a.Gl.warn({dataString:{message:"Error handling signup widget form",error:t}}),i(t)}}))).apply(this,arguments)}function E(t){t.redirected&&window.location.assign(t.url)}function F(t,e){t.style.display=e?"block":"none",t.textContent=e}w.displayName="Signup";const k="frc-captcha-solution",x="g-recaptcha-response";function A(t,e=""){return[...new FormData(t).entries()].map((([t,r])=>t===x||t===k?encodeURIComponent(t)+"="+encodeURIComponent(e)+`&isInvisibleCaptcha=${function(t){return!t.includes(k)&&t.includes(x)}(t)}`:encodeURIComponent(t)+"="+encodeURIComponent(r))).join("&")}function C(t){return q.apply(this,arguments)}function q(){return q=(0,i.Z)((function*(t){let e="";return window.friendlyChallenge?e=function(t){const e=t.querySelector(".frc-captcha-solution");return e&&e.getAttribute("value")}(t):window.grecaptcha&&(e=yield function(){return c.apply(this,arguments)}()),e})),q.apply(this,arguments)}},9575:function(t,e,r){var i,n;n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:this,t.exports=function(r){"use strict";var n,s=(r=r||{}).Base64,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var e={},r=0,i=t.length;r<i;r++)e[t.charAt(r)]=r;return e}(o),u=String.fromCharCode,c=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?u(192|e>>>6)+u(128|63&e):u(224|e>>>12&15)+u(128|e>>>6&63)+u(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return u(240|e>>>18&7)+u(128|e>>>12&63)+u(128|e>>>6&63)+u(128|63&e)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(t){return t.replace(l,c)},h=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[o.charAt(r>>>18),o.charAt(r>>>12&63),e>=2?"=":o.charAt(r>>>6&63),e>=1?"=":o.charAt(63&r)].join("")},f=r.btoa&&"function"==typeof r.btoa?function(t){return r.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,h)},m=function(t){return f(d(String(t)))},p=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},v=function(t,e){return e?p(m(t)):m(t)};r.Uint8Array&&(n=function(t,e){for(var r="",i=0,n=t.length;i<n;i+=3){var s=t[i],a=t[i+1],u=t[i+2],c=s<<16|a<<8|u;r+=o.charAt(c>>>18)+o.charAt(c>>>12&63)+(void 0!==a?o.charAt(c>>>6&63):"=")+(void 0!==u?o.charAt(63&c):"=")}return e?p(r):r});var S,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,g=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return u(55296+(e>>>10))+u(56320+(1023&e));case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},w=function(t){return t.replace(y,g)},b=function(t){var e=t.length,r=e%4,i=(e>0?a[t.charAt(0)]<<18:0)|(e>1?a[t.charAt(1)]<<12:0)|(e>2?a[t.charAt(2)]<<6:0)|(e>3?a[t.charAt(3)]:0),n=[u(i>>>16),u(i>>>8&255),u(255&i)];return n.length-=[0,0,2,1][r],n.join("")},P=r.atob&&"function"==typeof r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/\S{1,4}/g,b)},E=function(t){return P(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},F=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},k=function(t){return function(t){return w(P(t))}(F(t))};r.Uint8Array&&(S=function(t){return Uint8Array.from(E(F(t)),(function(t){return t.charCodeAt(0)}))});if(r.Base64={VERSION:"2.6.4",atob:E,btoa:f,fromBase64:k,toBase64:v,utob:d,encode:v,encodeURI:function(t){return v(t,!0)},btou:w,decode:k,noConflict:function(){var t=r.Base64;return r.Base64=s,t},fromUint8Array:n,toUint8Array:S},"function"==typeof Object.defineProperty){var x=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x((function(){return k(this)}))),Object.defineProperty(String.prototype,"toBase64",x((function(t){return v(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",x((function(){return v(this,!0)})))}}return r.Meteor&&(Base64=r.Base64),t.exports?t.exports.Base64=r.Base64:void 0===(i=function(){return r.Base64}.apply(e,[]))||(t.exports=i),{Base64:r.Base64}}(n)},7561:(t,e,r)=>{var i=r(7990),n=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(n,""):t}},7990:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},3279:(t,e,r)=>{var i=r(3218),n=r(7771),s=r(4841),o=Math.max,a=Math.min;t.exports=function(t,e,r){var u,c,l,d,h,f,m=0,p=!1,v=!1,S=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var r=u,i=c;return u=c=void 0,m=e,d=t.apply(i,r)}function g(t){var r=t-f;return void 0===f||r>=e||r<0||v&&t-m>=l}function w(){var t=n();if(g(t))return b(t);h=setTimeout(w,function(t){var r=e-(t-f);return v?a(r,l-(t-m)):r}(t))}function b(t){return h=void 0,S&&u?y(t):(u=c=void 0,d)}function P(){var t=n(),r=g(t);if(u=arguments,c=this,f=t,r){if(void 0===h)return function(t){return m=t,h=setTimeout(w,e),p?y(t):d}(f);if(v)return clearTimeout(h),h=setTimeout(w,e),y(f)}return void 0===h&&(h=setTimeout(w,e)),d}return e=s(e)||0,i(r)&&(p=!!r.leading,l=(v="maxWait"in r)?o(s(r.maxWait)||0,e):l,S="trailing"in r?!!r.trailing:S),P.cancel=function(){void 0!==h&&clearTimeout(h),m=0,u=f=c=h=void 0},P.flush=function(){return void 0===h?d:b(n())},P}},3448:(t,e,r)=>{var i=r(4239),n=r(7005);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==i(t)}},7771:(t,e,r)=>{var i=r(5639);t.exports=function(){return i.Date.now()}},4841:(t,e,r)=>{var i=r(7561),n=r(3218),s=r(3448),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var r=a.test(t);return r||u.test(t)?c(t.slice(2),r?2:8):o.test(t)?NaN:+t}}}]);