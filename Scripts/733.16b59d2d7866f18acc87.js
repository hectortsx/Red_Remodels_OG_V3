"use strict";(self.webpackJsonpruntime=self.webpackJsonpruntime||[]).push([[733],{7733:(n,e,t)=>{t.r(e),t.d(e,{cohortId:()=>J,sendPerformanceMetrics:()=>R});var i=t(5861),r=t(3631),o=t(1669),l=t.n(o),a=t(2039),s=t.n(a),u=t(7183),c=t.n(u),d=t(5967),p=t.n(d),v=t(5528),g=t(7108),h=t.n(g);const m=1e-6,w=n=>h()(n)?"unknown":n;function f({device:n=null,connectionType:e=null,connectionSpeed:t=null,viewportWidth:i=null,viewportHeight:r=null,hasCriticalCss:o=null,hasCustomWidgets:l=null,browserName:a=null,browserVersion:s=null,os:u=null,firstVisit:c=null,pageUuid:d=null,serviceWorkerRunning:p=null,siteAlias:v=null,host:g=null,path:h=null,vital:{name:f=null,delta:y=null}}){return{device:n,connectionType:w(e),connectionSpeed:w(t),viewportWidth:i,viewportHeight:r,hasCriticalCss:o,hasCustomWidgets:l,browserName:a,browserVersion:s,os:u,firstVisit:c,pageUuid:d,serviceWorkerRunning:p,siteAlias:v,host:w(g),path:h,[null==f?void 0:f.toLowerCase()]:y||m}}function y({cohortId:n,vital:e}){var t,i;return Object.assign({message:"web vitals logging",metric:(null==e?void 0:e.name)||"N/A",eventTarget:(null==e||null===(t=e.attribution)||void 0===t?void 0:t.eventTarget)||"N/A",value:(null==e?void 0:e.value)||"N/A",rating:(null==e?void 0:e.rating)||"N/A",eventType:(null==e||null===(i=e.attribution)||void 0===i?void 0:i.eventType)||"N/A",isGtmEnabled:!!window.google_tag_manager},e||{})}var b,C,A=t(9440),N=t.n(A),P=t(3422),T=t.n(P),W=t(2461),S=t(602);const k=c()(null),_=n=>k(n,window),I=n=>!!document.querySelector(n),U=function({apiUrl:n=(0,S.m)("runtimecollector.url")}={}){return function(){var e=(0,i.Z)((function*(e){if(!n)throw new Error("Missing endpoint for runtimecollector");return yield fetch(`${n}/performance/metrics`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).catch((n=>{W.Gl.warn({message:"Error while trying to report Vitals to BI",_skipJournal:!0,error:p()(n)?n.toString():JSON.stringify(n),siteAlias:T()("siteAlias",e),pageUrl:T()("_currentPage.pageUrl",window)})}))}));return function(n){return e.apply(this,arguments)}}()}(),V=N()((n=>W.Gl.info(n)),15),J=(null!==(b=null===(C=window)||void 0===C?void 0:C.sessionStorage)&&void 0!==b?b:window)._cohortId=Math.random()<.5?0:1,O=(...n)=>e=>n.reduce(((n,e)=>n.then(((...n)=>Promise.resolve().then(e.bind(null,...n))))),Promise.resolve(e)),Z=({name:n,value:e,rating:t})=>"INP"===n&&"poor"===t,E=function(){var n=(0,i.Z)((function*(){const n=_("_currentDevice"),e=_("navigator.connection.type"),t=_("navigator.connection.effectiveType"),o=_("Parameters.SiteAlias"),l=_("window.location.host"),a=_("location.pathname"),u=I("#criticalCss"),c=I('[data-element-type="custom_extension"]'),d=_("innerWidth"),v=_("innerHeight"),g=["_currentPage.pageContent.uuid","Parameters.InitialPageUuid"].map((n=>k(n,window))).filter(Boolean).at(0),{name:h=null,version:m=null,os:w=null}=(0,r.qY)(),[f,y]=yield(0,i.Z)((function*(){const n=yield(n=>{const e=s()((()=>navigator.serviceWorker.getRegistration("/")));return p()(e)?null:e})();return[!(null!=n&&n.active),!!n]}))();return{device:n,connectionType:e,connectionSpeed:t,viewportWidth:d,viewportHeight:v,hasCriticalCss:u,hasCustomWidgets:c,browserName:h,browserVersion:m,os:w,firstVisit:f,serviceWorkerRunning:y,pageUuid:g,siteAlias:o,host:l,path:a,cohortId:J}}));return function(){return n.apply(this,arguments)}}(),H=function(n){return E().then(l()({vital:n}))};function R(){return B.apply(this,arguments)}function B(){return B=(0,i.Z)((function*({sendLog:n=!0}={}){const e=[O(H,f,U),function(){var e=(0,i.Z)((function*(e){if(n&&Z(e))return O(H,y,V)(e)}));return function(n){return e.apply(this,arguments)}}()].filter(Boolean);[v.mw,v.mr,n=>(0,v.Yn)(n,{durationThreshold:0,reportAllChanges:!0}),v.Fu,v.NO,v.a4].forEach((n=>n((n=>{Promise.all(e.map((e=>e(n).catch(console.warn))))}))))})),B.apply(this,arguments)}}}]);